@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
  Design System: Unified Studio Aesthetic
  Light Mode: Apple-style professional neutrals
  Dark Mode: Midnight Slate palette
  All colors MUST be HSL.
*/

@layer base {
  /* Light Mode (Default) - Apple Gray Palette */
  :root {
    --background: 240 5% 97%; /* #F5F5F7 */
    --foreground: 240 6% 12%; /* #1D1D1F */

    --card: 0 0% 100%; /* #FFFFFF */
    --card-foreground: 240 6% 12%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 6% 12%;

    --primary: 240 6% 12%; /* Midnight - main action color */
    --primary-foreground: 0 0% 100%;

    --secondary: 240 5% 94%;
    --secondary-foreground: 240 6% 12%;

    --muted: 240 5% 96%;
    --muted-foreground: 240 4% 46%;

    --accent: 240 5% 94%;
    --accent-foreground: 240 6% 12%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 240 5% 84%; /* #D2D2D7 */
    --input: 240 5% 84%;
    --ring: 240 6% 12%;

    --radius: 0.75rem;

    /* Talent Mode — Coalescing Blue */
    --talent-blue: 217 91% 60%;
    --talent-blue-deep: 220 80% 46%;
    --talent-gold: 42 44% 63%; /* Mastery Gold #C0B283 */

    /* Studio-specific tokens */
    --studio-bg: 240 5% 97%;
    --studio-surface: 0 0% 100%;
    --studio-surface-elevated: 0 0% 100%;
    --studio-border: 240 5% 84%;
    --studio-text-primary: 240 6% 12%;
    --studio-text-secondary: 240 4% 46%;
    --studio-text-muted: 240 4% 60%;

    /* Glass tokens - Light mode */
    --glass-bg: 0 0% 100% / 0.7;
    --glass-border: 0 0% 0% / 0.08;
    --glass-hover: 0 0% 0% / 0.04;

    /* Compliance Mode tokens - Light (4-tier green) */
    --compliance-sage: 140 20% 72%;       /* Tier 1: Soft Sage */
    --compliance-emerald: 152 56% 42%;    /* Tier 2: True Emerald */
    --compliance-primary: 152 69% 31%;    /* Tier 3: Forest Deep */
    --compliance-secondary: 152 56% 42%;
    --compliance-accent: 160 60% 60%;     /* Tier 4: Glowing Mint */
    --compliance-surface: 152 20% 96%;
    --compliance-muted: 152 15% 88%;
  }

  /* Dark Mode - Midnight Slate Palette */
  .dark {
    --background: 220 14% 6%; /* #121417 */
    --foreground: 0 0% 100%; /* #FFFFFF */

    --card: 217 33% 17%; /* #1E293B */
    --card-foreground: 0 0% 100%;

    --popover: 217 33% 17%;
    --popover-foreground: 0 0% 100%;

    --primary: 0 0% 100%; /* White - main action in dark */
    --primary-foreground: 220 14% 6%;

    --secondary: 217 33% 22%;
    --secondary-foreground: 0 0% 100%;

    --muted: 217 33% 20%;
    --muted-foreground: 0 0% 64%;

    --accent: 217 33% 22%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 100% / 0.12; /* rgba(255, 255, 255, 0.12) */
    --input: 0 0% 100% / 0.12;
    --ring: 0 0% 100%;

    /* Talent Mode — Coalescing Blue (Dark) */
    --talent-blue: 217 91% 65%;
    --talent-blue-deep: 220 80% 55%;
    --talent-gold: 42 44% 63%;

    /* Studio-specific tokens - Dark */
    --studio-bg: 220 14% 6%;
    --studio-surface: 217 33% 17%;
    --studio-surface-elevated: 217 33% 22%;
    --studio-border: 0 0% 100% / 0.12;
    --studio-text-primary: 0 0% 100%;
    --studio-text-secondary: 0 0% 75%;
    --studio-text-muted: 0 0% 55%;

    /* Glass tokens - Dark mode */
    --glass-bg: 0 0% 100% / 0.05;
    --glass-border: 0 0% 100% / 0.1;
    --glass-hover: 0 0% 100% / 0.08;

    /* Compliance Mode tokens - Dark (4-tier green, boosted luminosity) */
    --compliance-sage: 140 25% 55%;
    --compliance-emerald: 152 56% 50%;
    --compliance-primary: 152 69% 40%;
    --compliance-secondary: 152 56% 50%;
    --compliance-accent: 160 65% 65%;
    --compliance-surface: 152 30% 12%;
    --compliance-muted: 152 20% 18%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "cv11", "ss01";
  }

  /* Dark Mode Typography Fix: Reduce weight and increase spacing to prevent halation */
  .dark body {
    font-weight: 350;
    letter-spacing: 0.01em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
    font-weight: 550;
    letter-spacing: 0.005em;
  }

  .dark .font-medium {
    font-weight: 450;
  }

  .dark .font-semibold {
    font-weight: 550;
  }

  .dark .font-bold {
    font-weight: 650;
  }
}

@layer utilities {
  /* High contrast text utilities - 7:1 ratio compliance */
  .text-high-contrast {
    color: hsl(var(--foreground));
  }

  .text-medium-contrast {
    color: hsl(var(--muted-foreground));
  }

  /* Glassmorphism utilities */
  .glass-card {
    @apply bg-card/50 backdrop-blur-[25px] rounded-2xl;
    border: 0.5px solid rgba(255, 255, 255, 0.1);
  }

  .dark .glass-card {
    border: 0.5px solid rgba(255, 255, 255, 0.08);
  }

  .glass-button {
    @apply bg-background/5 backdrop-blur-sm border border-border hover:bg-accent/10 transition-colors;
  }

  .glass-surface {
    @apply bg-card/60 backdrop-blur-xl border border-border;
  }

  /* Studio-specific utilities */
  .studio-surface {
    background-color: hsl(var(--studio-surface));
  }

  .studio-elevated {
    background-color: hsl(var(--studio-surface-elevated));
  }

  .studio-border {
    border-color: hsl(var(--studio-border));
  }

  /* Subtle shadows for depth without harsh contrast */
  .shadow-studio {
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.08);
  }

  .dark .shadow-studio {
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.2);
  }

/* Interactive hover states */
  .hover-lift {
    @apply transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg;
  }
}

/* Liquid Pulse animation for ICV bar */
@keyframes liquidPulse {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* ═══════════════════════════════════════════════════════════════
   Monaco Editor Protected Block Styles
   For Scientific Core, Telemetry, and TMA SDK sections
═══════════════════════════════════════════════════════════════ */

.protected-block-scientific {
  background-color: rgba(239, 68, 68, 0.08) !important;
  border-left: 3px solid rgba(239, 68, 68, 0.5) !important;
}

.protected-block-telemetry {
  background-color: rgba(249, 115, 22, 0.08) !important;
  border-left: 3px solid rgba(249, 115, 22, 0.5) !important;
}

.protected-block-tma {
  background-color: rgba(59, 130, 246, 0.08) !important;
  border-left: 3px solid rgba(59, 130, 246, 0.5) !important;
}

.protected-glyph {
  background-color: rgba(239, 68, 68, 0.3);
  border-radius: 2px;
}

.dark .protected-block-scientific {
  background-color: rgba(239, 68, 68, 0.12) !important;
}

.dark .protected-block-telemetry {
  background-color: rgba(249, 115, 22, 0.12) !important;
}

.dark .protected-block-tma {
  background-color: rgba(59, 130, 246, 0.12) !important;
}
